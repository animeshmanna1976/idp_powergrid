<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Employee Dashboard - TalentGRID</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <style>
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --primary-light: #818cf8;
      --secondary: #94a3b8;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark-bg: #0f172a;
      --dark-card: #1e293b;
      --dark-border: #334155;
      --dark-text: #f1f5f9;
      --dark-muted: #94a3b8;
      --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
      --glow: 0 0 10px rgba(99, 102, 241, 0.5);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--dark-bg);
      color: var(--dark-text);
      line-height: 1.5;
      overflow-x: hidden;
    }
    
    .emp-wrap {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1.5rem;
    }
    
    /* Header Styles */
    .emp-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--dark-border);
      opacity: 0;
      transform: translateY(-20px);
    }
    
    .emp-left h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin: 0.5rem 0 0.25rem;
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .muted {
      color: var(--dark-muted);
      font-size: 0.9rem;
    }
    
    .ghost {
      background: none;
      border: none;
      color: var(--primary-light);
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      padding: 0.5rem 0;
      transition: all 0.3s ease;
    }
    
    .ghost:hover {
      text-decoration: underline;
      color: var(--primary);
    }
    
    .emp-right {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }
    
    .readiness-pill {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: var(--dark-card);
      border-radius: 50px;
      padding: 0.75rem 1.25rem;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--dark-border);
      transition: all 0.3s ease;
    }
    
    .readiness-pill:hover {
      transform: translateY(-3px);
      box-shadow: var(--glow);
    }
    
    .readiness-pill #readinessPct {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .readiness-pill .label {
      font-size: 0.75rem;
      color: var(--dark-muted);
      margin-top: 0.25rem;
    }
    
    .btn {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--card-shadow);
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--glow);
    }
    
    .btn-secondary {
      background: rgba(99, 102, 241, 0.1);
      color: var(--primary-light);
      border: 1px solid var(--primary);
    }
    
    .btn-secondary:hover {
      background: rgba(99, 102, 241, 0.2);
    }
    
    .btn-small {
      padding: 0.5rem 1rem;
      font-size: 0.85rem;
    }
    
    /* Main Layout */
    .emp-main {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    
    .top-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }
    
    .content-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 1.5rem;
    }
    
    /* Card Styles */
    .card {
      background: var(--dark-card);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--dark-border);
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--glow);
    }
    
    .card h3 {
      margin-bottom: 1.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--primary-light);
      border-bottom: 1px solid var(--dark-border);
      padding-bottom: 0.5rem;
    }
    
    /* IMPROVED: Overview Card */
    .overview {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    .profile-header {
      display: flex;
      gap: 1.5rem;
      align-items: flex-start;
    }
    
    .avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      box-shadow: var(--glow);
      position: relative;
      overflow: hidden;
      flex-shrink: 0;
    }
    
    .avatar::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom right,
        rgba(255, 255, 255, 0.3),
        rgba(255, 255, 255, 0)
      );
      transform: rotate(30deg);
    }
    
    .profile-info {
      flex: 1;
    }
    
    .profile-info h2 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, var(--primary-light), white);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .profile-meta {
      color: var(--dark-muted);
      margin-bottom: 1rem;
    }
    
    .idp-status {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--warning);
      color: var(--dark-bg);
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-size: 0.9rem;
      font-weight: 600;
      animation: pulse 2s infinite;
    }
    
    .idp-status i {
      font-size: 0.8rem;
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); }
      100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }
    
    .stat-card {
      background: rgba(30, 41, 59, 0.7);
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      transition: all 0.3s ease;
      border: 1px solid var(--dark-border);
    }
    
    .stat-card:hover {
      transform: translateY(-3px);
      background: rgba(99, 102, 241, 0.1);
    }
    
    .stat-card .num {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.25rem;
    }
    
    .stat-card .label {
      font-size: 0.8rem;
      color: var(--dark-muted);
    }
    
    .readiness-bar {
      margin-top: 1rem;
    }
    
    .readiness-bar .label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }
    
    .progress-bar {
      height: 8px;
      background: var(--dark-border);
      border-radius: 4px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      border-radius: 4px;
      width: 65%;
      transition: width 1s ease;
    }
    
    /* IMPROVED: 9-Box Grid */
    .ninebox-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 8px;
      margin-bottom: 1.5rem;
      height: 260px;
      position: relative;
    }
    
    .ninebox-cell {
      border: 1px solid var(--dark-border);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      position: relative;
      border-radius: 8px;
      transition: all 0.3s ease;
      cursor: pointer;
      overflow: hidden;
      text-align: center;
      padding: 0.5rem;
    }
    
    .ninebox-cell::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    /* Color coding for 9-box */
    .ninebox-cell[data-pot="2"][data-perf="2"]::before { background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.1)); }
    .ninebox-cell[data-pot="2"][data-perf="1"]::before { background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.1)); }
    .ninebox-cell[data-pot="2"][data-perf="0"]::before { background: linear-gradient(135deg, rgba(101, 163, 13, 0.3), rgba(101, 163, 13, 0.1)); }
    .ninebox-cell[data-pot="1"][data-perf="2"]::before { background: linear-gradient(135deg, rgba(245, 158, 11, 0.3), rgba(245, 158, 11, 0.1)); }
    .ninebox-cell[data-pot="1"][data-perf="1"]::before { background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.05)); }
    .ninebox-cell[data-pot="1"][data-perf="0"]::before { background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.02)); }
    .ninebox-cell[data-pot="0"][data-perf="2"]::before { background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(239, 68, 68, 0.1)); }
    .ninebox-cell[data-pot="0"][data-perf="1"]::before { background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.05)); }
    .ninebox-cell[data-pot="0"][data-perf="0"]::before { background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.02)); }
    
    .ninebox-cell:hover::before {
      opacity: 1;
    }
    
    .ninebox-cell.active {
      color: white;
      font-weight: 600;
      box-shadow: var(--glow);
      transform: scale(1.05);
      z-index: 1;
    }
    
    .ninebox-cell.active::before {
      opacity: 1;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark)) !important;
    }
    
    .ninebox-score {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    
    .ninebox-label {
      font-size: 0.7rem;
      opacity: 0.9;
    }
    
    .ninebox-interpretation {
      font-size: 0.9rem;
      color: var(--dark-muted);
      padding: 0.75rem;
      background: rgba(30, 41, 59, 0.7);
      border-radius: 8px;
      border-left: 3px solid var(--primary);
    }
    
    /* IMPROVED: Career Path */
    .career-path {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      position: relative;
    }
    
    .career-path::before {
      content: '';
      position: absolute;
      left: 24px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--dark-border);
      z-index: 0;
    }
    
    .career-step {
      display: flex;
      gap: 1rem;
      align-items: center;
      padding: 1rem;
      border-radius: 8px;
      background: rgba(30, 41, 59, 0.7);
      transition: all 0.3s ease;
      position: relative;
      z-index: 1;
      cursor: pointer;
    }
    
    .career-step:hover {
      transform: translateX(5px);
      background: rgba(99, 102, 241, 0.1);
    }
    
    .career-step.current {
      background: rgba(99, 102, 241, 0.15);
      border: 1px solid var(--primary);
    }
    
    .career-step.future {
      opacity: 0.7;
    }
    
    .career-step.completed .career-marker {
      background: linear-gradient(135deg, var(--success), #059669);
      color: white;
      box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
    }
    
    .career-step.current .career-marker {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      box-shadow: var(--glow);
      animation: pulse 2s infinite;
    }
    
    .career-step.future .career-marker {
      background: rgba(148, 163, 184, 0.2);
      color: var(--dark-muted);
    }
    
    .career-marker {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      flex-shrink: 0;
      transition: all 0.3s ease;
      position: relative;
      z-index: 2;
    }
    
    .career-marker .step-number {
      font-size: 1rem;
      line-height: 1;
    }
    
    .career-marker .step-icon {
      font-size: 0.8rem;
      margin-top: 2px;
    }
    
    .career-info {
      flex: 1;
    }
    
    .career-info h4 {
      margin-bottom: 0.25rem;
      font-size: 1rem;
    }
    
    .career-info p {
      font-size: 0.9rem;
      color: var(--dark-muted);
      margin-bottom: 0.5rem;
    }
    
    .career-timeline {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.8rem;
      color: var(--primary-light);
    }
    
    .career-timeline i {
      font-size: 0.7rem;
    }
    
    .career-progress {
      height: 4px;
      background: var(--dark-border);
      border-radius: 2px;
      margin-top: 0.5rem;
      overflow: hidden;
    }
    
    .career-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      border-radius: 2px;
      width: 30%; /* Current step progress */
    }
    
    /* IMPROVED: Achievements/Badges */
    .badges-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 1rem;
    }
    
    .badge {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      padding: 1.25rem 0.75rem;
      border-radius: 12px;
      background: rgba(30, 41, 59, 0.7);
      transition: all 0.3s ease;
      cursor: pointer;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .badge::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .badge:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: var(--glow);
    }
    
    .badge:hover::before {
      opacity: 1;
    }
    
    .badge.tier-gold::before { background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.05)); }
    .badge.tier-silver::before { background: linear-gradient(135deg, rgba(148, 163, 184, 0.2), rgba(148, 163, 184, 0.05)); }
    .badge.tier-bronze::before { background: linear-gradient(135deg, rgba(180, 83, 9, 0.2), rgba(180, 83, 9, 0.05)); }
    
    .badge-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      position: relative;
      z-index: 1;
    }
    
    .badge.tier-gold .badge-icon {
      background: linear-gradient(135deg, #f59e0b, #d97706);
      box-shadow: 0 0 15px rgba(245, 158, 11, 0.4);
    }
    
    .badge.tier-silver .badge-icon {
      background: linear-gradient(135deg, #94a3b8, #64748b);
      box-shadow: 0 0 15px rgba(148, 163, 184, 0.4);
    }
    
    .badge.tier-bronze .badge-icon {
      background: linear-gradient(135deg, #b45309, #92400e);
      box-shadow: 0 0 15px rgba(180, 83, 9, 0.4);
    }
    
    .badge-name {
      font-size: 0.8rem;
      font-weight: 600;
      position: relative;
      z-index: 1;
    }
    
    .badge-category {
      font-size: 0.7rem;
      color: var(--dark-muted);
      position: relative;
      z-index: 1;
    }
    
    .badge-progress {
      width: 100%;
      height: 3px;
      background: var(--dark-border);
      border-radius: 2px;
      margin-top: 0.5rem;
      overflow: hidden;
      position: relative;
      z-index: 1;
    }
    
    .badge-progress-fill {
      height: 100%;
      border-radius: 2px;
    }
    
    .badge.tier-gold .badge-progress-fill { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
    .badge.tier-silver .badge-progress-fill { background: linear-gradient(90deg, #94a3b8, #cbd5e1); }
    .badge.tier-bronze .badge-progress-fill { background: linear-gradient(90deg, #b45309, #d97706); }
    
    /* Progress Card */
    .progresscard {
      position: relative;
    }
    
    .chart-container {
      position: relative;
      height: 200px;
      margin-bottom: 1.5rem;
    }
    
    .milestones {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .milestone {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      border-radius: 8px;
      background: rgba(30, 41, 59, 0.7);
      transition: all 0.3s ease;
    }
    
    .milestone:hover {
      background: rgba(99, 102, 241, 0.1);
      transform: translateX(5px);
    }
    
    .milestone-status {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      position: relative;
    }
    
    .milestone-status.completed {
      background: var(--success);
      box-shadow: 0 0 8px var(--success);
    }
    
    .milestone-status.in-progress {
      background: var(--warning);
      box-shadow: 0 0 8px var(--warning);
      animation: pulse 2s infinite;
    }
    
    .milestone-status.pending {
      background: var(--secondary);
    }
    
    .milestone-text {
      font-size: 0.9rem;
    }
    
    /* Gap Analysis */
    .gap-analysis .chart-container {
      height: 220px;
    }
    
    .gap-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-top: 1rem;
    }
    
    .gap-table th, .gap-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid var(--dark-border);
    }
    
    .gap-table th {
      font-weight: 600;
      color: var(--dark-muted);
    }
    
    .gap-badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    
    .gap-badge.high {
      background: rgba(239, 68, 68, 0.2);
      color: var(--danger);
    }
    
    .gap-badge.medium {
      background: rgba(245, 158, 11, 0.2);
      color: var(--warning);
    }
    
    .gap-badge.low {
      background: rgba(16, 185, 129, 0.2);
      color: var(--success);
    }
    
    /* IDP List */
    .idp {
      position: relative;
    }
    
    .idp-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .idp-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .idp-item {
      padding: 1rem;
      border-radius: 8px;
      background: rgba(30, 41, 59, 0.7);
      border-left: 3px solid var(--primary);
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .idp-item:hover {
      transform: translateX(5px);
      background: rgba(99, 102, 241, 0.1);
    }
    
    .idp-item-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    
    .idp-item-title {
      font-weight: 600;
    }
    
    .idp-item-type {
      font-size: 0.8rem;
      color: var(--dark-muted);
      background: rgba(148, 163, 184, 0.2);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
    }
    
    .idp-item-desc {
      font-size: 0.9rem;
      margin-bottom: 0.75rem;
      color: var(--dark-muted);
    }
    
    .idp-item-meta {
      display: flex;
      gap: 1rem;
      font-size: 0.8rem;
      color: var(--dark-muted);
    }
    
    /* Mentor Box */
    .mentor {
      position: relative;
    }
    
    .mentor-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .mentor-box {
      display: flex;
      gap: 1rem;
      align-items: center;
      padding: 1rem;
      border-radius: 8px;
      background: rgba(30, 41, 59, 0.7);
      transition: all 0.3s ease;
    }
    
    .mentor-box:hover {
      transform: translateX(5px);
      background: rgba(99, 102, 241, 0.1);
    }
    
    .mentor-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      box-shadow: var(--glow);
    }
    
    .mentor-info h4 {
      margin-bottom: 0.25rem;
    }
    
    .mentor-info p {
      font-size: 0.9rem;
      color: var(--dark-muted);
    }
    
    /* Feedback List */
    .feedback-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .feedback-item {
      padding: 1rem;
      border-radius: 8px;
      background: rgba(30, 41, 59, 0.7);
      border-left: 3px solid var(--warning);
      transition: all 0.3s ease;
    }
    
    .feedback-item:hover {
      transform: translateX(5px);
      background: rgba(245, 158, 11, 0.1);
    }
    
    .feedback-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    
    .feedback-source {
      font-weight: 600;
    }
    
    .feedback-date {
      font-size: 0.8rem;
      color: var(--dark-muted);
    }
    
    .feedback-text {
      font-size: 0.9rem;
      margin-bottom: 0.75rem;
      color: var(--dark-muted);
    }
    
    .feedback-proof {
      display: inline-block;
      font-size: 0.8rem;
      color: var(--primary-light);
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .feedback-proof:hover {
      text-decoration: underline;
      color: var(--primary);
    }
    
    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      padding: 1rem 1.5rem;
      background: var(--dark-card);
      color: white;
      border-radius: 8px;
      box-shadow: var(--card-shadow);
      transform: translateX(100px);
      opacity: 0;
      transition: all 0.3s ease;
      border-left: 4px solid var(--primary);
      z-index: 1000;
    }
    
    .toast.show {
      transform: translateX(0);
      opacity: 1;
    }
    
    /* AI Chat Bubble */
    .ai-chat-container {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      z-index: 1000;
    }
    
    .ai-chat-bubble {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      box-shadow: var(--glow);
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    
    .ai-chat-bubble:hover {
      transform: scale(1.1);
    }
    
    .ai-chat-bubble::after {
      content: '';
      position: absolute;
      top: -5px;
      right: -5px;
      width: 20px;
      height: 20px;
      background: var(--success);
      border-radius: 50%;
      border: 3px solid var(--dark-bg);
    }
    
    .ai-chat-window {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 350px;
      height: 450px;
      background: var(--dark-card);
      border-radius: 12px;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--dark-border);
      display: none;
      flex-direction: column;
      overflow: hidden;
      opacity: 0;
      transform: translateY(20px) scale(0.9);
      transition: all 0.3s ease;
    }
    
    .ai-chat-window.active {
      display: flex;
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    
    .ai-chat-header {
      padding: 1rem;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .ai-chat-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }
    
    .ai-chat-title {
      font-weight: 600;
    }
    
    .ai-chat-subtitle {
      font-size: 0.8rem;
      opacity: 0.8;
    }
    
    .ai-chat-close {
      margin-left: auto;
      background: none;
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
    }
    
    .ai-chat-messages {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .ai-message {
      padding: 0.75rem 1rem;
      border-radius: 12px;
      max-width: 85%;
      font-size: 0.9rem;
      line-height: 1.4;
      animation: messageSlide 0.3s ease;
    }
    
    @keyframes messageSlide {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .ai-message.bot {
      background: rgba(99, 102, 241, 0.2);
      border-bottom-left-radius: 4px;
      align-self: flex-start;
    }
    
    .ai-message.user {
      background: rgba(30, 41, 59, 0.7);
      border-bottom-right-radius: 4px;
      align-self: flex-end;
    }
    
    .ai-chat-input {
      padding: 1rem;
      border-top: 1px solid var(--dark-border);
      display: flex;
      gap: 0.5rem;
    }
    
    .ai-chat-input input {
      flex: 1;
      padding: 0.75rem;
      border-radius: 8px;
      border: 1px solid var(--dark-border);
      background: var(--dark-bg);
      color: var(--dark-text);
      font-size: 0.9rem;
    }
    
    .ai-chat-input button {
      padding: 0.75rem 1rem;
      border-radius: 8px;
      border: none;
      background: var(--primary);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .ai-chat-input button:hover {
      background: var(--primary-dark);
    }
    
    .ai-suggestion-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    
    .ai-suggestion-chip {
      padding: 0.5rem 0.75rem;
      background: rgba(99, 102, 241, 0.2);
      border-radius: 20px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .ai-suggestion-chip:hover {
      background: rgba(99, 102, 241, 0.4);
    }
    
    /* Modal Styles */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(15, 23, 42, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal.active {
      opacity: 1;
      visibility: visible;
    }
    
    .modal-content {
      background: var(--dark-card);
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--dark-border);
      transform: scale(0.9);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .modal.active .modal-content {
      transform: scale(1);
      opacity: 1;
    }
    
    .modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--dark-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-header h3 {
      margin: 0;
      color: var(--primary-light);
    }
    
    .modal-close {
      background: none;
      border: none;
      color: var(--dark-muted);
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .modal-close:hover {
      color: var(--primary);
    }
    
    .modal-body {
      padding: 1.5rem;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .emp-header {
        flex-direction: column;
        gap: 1rem;
      }
      
      .emp-right {
        align-self: flex-start;
      }
      
      .profile-header {
        flex-direction: column;
        text-align: center;
      }
      
      .content-grid {
        grid-template-columns: 1fr;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .ai-chat-window {
        width: 300px;
        right: -50px;
      }
      
      .badges-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    /* Animation Classes */
    .animate-in {
      opacity: 1;
      transform: translateY(0);
    }
    
    .stagger-animation > * {
      opacity: 0;
      transform: translateY(20px);
    }

    /* here */
    /* ...existing code... */
/* Improved styling for AI & Mentor buttons */
#aiGuidanceBtn,
#connectMentorBtn {
  background: linear-gradient(135deg,#6d28d9 0%, #4f46e5 100%);
  color: #ffffff;
  border: none;
  padding: 0.6rem 1rem;
  border-radius: 10px;
  font-weight: 700;
  font-size: 0.9rem;
  box-shadow: 0 10px 22px rgba(79,70,229,0.18);
  transition: transform .18s ease, box-shadow .18s ease, opacity .12s ease;
  display: inline-flex;
  align-items: center;
  gap: 0.6rem;
  cursor: pointer;
}

/* stronger hover/active states */
#aiGuidanceBtn:hover,
#connectMentorBtn:hover {
  transform: translateY(-3px);
  box-shadow: 0 18px 40px rgba(79,70,229,0.22);
  opacity: 0.98;
}
#aiGuidanceBtn:active,
#connectMentorBtn:active {
  transform: translateY(-1px) scale(.995);
}

/* make any <a> inside the button look like button text */
#aiGuidanceBtn a,
#connectMentorBtn a {
  color: #fff !important;
  text-decoration: none;
  display: inline-block;
  width: 100%;
  height: 100%;
  line-height: inherit;
}

/* optional: smaller variant for mobile */
@media (max-width: 480px) {
  #aiGuidanceBtn,
  #connectMentorBtn {
    padding: 0.5rem 0.8rem;
    font-size: 0.85rem;
  }
}
/* ...existing code... */
  </style>
</head>
<body>
  <div class="emp-wrap">
    <header class="emp-header">
      <div class="emp-left">
        <button id="backBtn" class="ghost">
            <a href="empLogin.html">‚Üê Back to Employee List</a> 
        </button>
        <h1 id="empName">John Smith</h1>
        <div id="empMeta" class="muted">Senior Engineer ‚Ä¢ Technology Department</div>
      </div>
      <div class="emp-right">
        <div class="readiness-pill"><div id="readinessPct">65%</div><div class="label">Readiness</div></div>
        <button id="exportPdf" class="btn">Download IDP</button>
      </div>
    </header>

    <main class="emp-main">
      <section class="top-cards">
        <!-- IMPROVED: Profile Overview Card -->
        <div class="card overview">
          <div class="profile-header">
            <div class="avatar">JS</div>
            <div class="profile-info">
              <h2>John Smith</h2>
              <div class="profile-muted">Senior Engineer - Technology Department</div>
              <div class="idp-status">
                <i class="fas fa-sync-alt"></i>
                IDP: In Progress
              </div>
            </div>
          </div>
          
          <div class="stats-grid">
            <div class="stat-card">
              <div class="num">4.2</div>
              <div class="label">Performance</div>
            </div>
            <div class="stat-card">
              <div class="num">8</div>
              <div class="label">Potential</div>
            </div>
            <div class="stat-card">
              <div class="num">Lead Engineer</div>
              <div class="label">Target Role</div>
            </div>
          </div>
          
          <div class="readiness-bar">
            <div class="label">
              <span>Readiness for Target Role</span>
              <span>65%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill"></div>
            </div>
          </div>
        </div>

        <!-- IMPROVED: 9-Box Grid -->
        <div class="card ninebox">
          <h3>9-Box Position</h3>
          <div class="ninebox-grid" id="employeeNineBox">
            <!-- grid generated by JS -->
          </div>
          <div class="ninebox-interpretation" id="nineInterpret">High Potential Employee with consistent performance. Ready for stretch assignments and leadership development.</div>
        </div>

        <div class="card progresscard">
          <h3>Progress & Milestones</h3>
          <div class="chart-container">
            <canvas id="progressChart"></canvas>
          </div>
          <div class="milestones" id="milestonesList">
            <div class="milestone">
              <div class="milestone-status completed"></div>
              <div class="milestone-text">Completed Leadership Fundamentals Training</div>
            </div>
            <div class="milestone">
              <div class="milestone-status in-progress"></div>
              <div class="milestone-text">Cross-functional project assignment (in progress)</div>
            </div>
            <div class="milestone">
              <div class="milestone-status pending"></div>
              <div class="milestone-text">Advanced Technical Certification</div>
            </div>
          </div>
        </div>
      </section>

      <section class="content-grid">
        <div class="card gap-analysis">
          <h3>Competency Gap Analysis</h3>
          <div class="chart-container">
            <canvas id="gapChart"></canvas>
          </div>
          <table class="gap-table" id="gapTable">
            <thead>
              <tr>
                <th>Competency</th>
                <th>Required</th>
                <th>Current</th>
                <th>Gap</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Strategic Thinking</td>
                <td>4</td>
                <td>2</td>
                <td><span class="gap-badge high">High</span></td>
              </tr>
              <tr>
                <td>Team Leadership</td>
                <td>4</td>
                <td>3</td>
                <td><span class="gap-badge medium">Medium</span></td>
              </tr>
              <tr>
                <td>Technical Expertise</td>
                <td>5</td>
                <td>4</td>
                <td><span class="gap-badge low">Low</span></td>
              </tr>
              <tr>
                <td>Stakeholder Management</td>
                <td>3</td>
                <td>2</td>
                <td><span class="gap-badge medium">Medium</span></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card idp">
          <div class="idp-header">
            <h3>AI-Recommended IDP</h3>
            <button id="aiGuidanceBtn" class="btn btn-secondary btn-small">
                <a href="aiGuide.html">Take Guidance from AI</a>
            </button>
          </div>
          <div id="idpList" class="idp-list">
            <div class="idp-item">
              <div class="idp-item-header">
                <div class="idp-item-title">Strategic Leadership Program</div>
                <div class="idp-item-type">Training</div>
              </div>
              <div class="idp-item-desc">6-week program focusing on strategic thinking and decision-making</div>
              <div class="idp-item-meta">
                <span>Duration: 6 weeks</span>
                <span>Priority: High</span>
              </div>
            </div>
            <div class="idp-item">
              <div class="idp-item-header">
                <div class="idp-item-title">Cross-Functional Project Lead</div>
                <div class="idp-item-type">Job Rotation</div>
              </div>
              <div class="idp-item-desc">Lead a project team with members from different departments</div>
              <div class="idp-item-meta">
                <span>Duration: 4 months</span>
                <span>Priority: Medium</span>
              </div>
            </div>
            <div class="idp-item">
              <div class="idp-item-header">
                <div class="idp-item-title">Advanced Technical Certification</div>
                <div class="idp-item-type">Certification</div>
              </div>
              <div class="idp-item-desc">Complete advanced certification in cloud architecture</div>
              <div class="idp-item-meta">
                <span>Duration: 3 months</span>
                <span>Priority: Low</span>
              </div>
            </div>
          </div>
        </div>

        <div class="card mentor">
          <div class="mentor-header">
            <h3>Mentorship</h3>
            <button id="connectMentorBtn" class="btn btn-secondary btn-small">
                <a href="mentorGuide.html">Connect with Mentor</a>
            </button>
          </div>
          <div id="mentorBox" class="mentor-box">
            <div class="mentor-avatar">RS</div>
            <div class="mentor-info">
              <h4>Robert Sharma</h4>
              <p>Director of Engineering</p>
              <p>Monthly mentorship sessions focused on leadership development</p>
            </div>
            
          </div>
        </div>

        <div class="card feedback">
          <h3>Feedback & Proofs</h3>
          <div id="feedbackList" class="feedback-list">
            <div class="feedback-item">
              <div class="feedback-header">
                <div class="feedback-source">360¬∞ Feedback</div>
                <div class="feedback-date">March 15, 2023</div>
              </div>
              <div class="feedback-text">Demonstrates strong technical skills but needs development in strategic planning and team leadership.</div>
              <a href="#" class="feedback-proof">View Detailed Report ‚Üí</a>
            </div>
            <div class="feedback-item">
              <div class="feedback-header">
                <div class="feedback-source">Project Review</div>
                <div class="feedback-date">February 28, 2023</div>
              </div>
              <div class="feedback-text">Successfully delivered the Q4 platform upgrade ahead of schedule with minimal issues.</div>
              <a href="#" class="feedback-proof">View Project Details ‚Üí</a>
            </div>
          </div>
        </div>

        <!-- IMPROVED: Career Path -->
        <div class="card career">
          <h3>Career Path</h3>
          <div id="careerPath" class="career-path">
            <div class="career-step completed">
              <div class="career-marker">
                <div class="step-number">1</div>
                <div class="step-icon"><i class="fas fa-check"></i></div>
              </div>
              <div class="career-info">
                <h4>Junior Engineer</h4>
                <p>Developed foundational technical skills and project experience</p>
                <div class="career-timeline">
                  <i class="fas fa-calendar"></i>
                  <span>Completed: 2020-2022</span>
                </div>
              </div>
            </div>
            <div class="career-step current">
              <div class="career-marker">
                <div class="step-number">2</div>
                <div class="step-icon"><i class="fas fa-user"></i></div>
              </div>
              <div class="career-info">
                <h4>Senior Engineer</h4>
                <p>Current Role - Leading technical projects and mentoring junior team members</p>
                <div class="career-timeline">
                  <i class="fas fa-calendar"></i>
                  <span>Current: 2022-Present</span>
                </div>
                <div class="career-progress">
                  <div class="career-progress-fill"></div>
                </div>
              </div>
            </div>
            <div class="career-step future">
              <div class="career-marker">
                <div class="step-number">3</div>
                <div class="step-icon"><i class="fas fa-rocket"></i></div>
              </div>
              <div class="career-info">
                <h4>Lead Engineer</h4>
                <p>Target Role - Technical leadership and strategic decision-making</p>
                <div class="career-timeline">
                  <i class="fas fa-clock"></i>
                  <span>Estimated: 12-18 months</span>
                </div>
              </div>
            </div>
            <div class="career-step future">
              <div class="career-marker">
                <div class="step-number">4</div>
                <div class="step-icon"><i class="fas fa-chart-line"></i></div>
              </div>
              <div class="career-info">
                <h4>Engineering Manager</h4>
                <p>Future Role - Team leadership and organizational impact</p>
                <div class="career-timeline">
                  <i class="fas fa-clock"></i>
                  <span>Estimated: 2-3 years</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- IMPROVED: Achievements/Badges -->
        <div class="card badges">
          <h3>Achievements & Badges</h3>
          <div id="badges" class="badges-container">
            <div class="badge tier-gold">
              <div class="badge-icon">üèÜ</div>
              <div class="badge-name">Top Performer</div>
              <div class="badge-category">Performance</div>
              <div class="badge-progress">
                <div class="badge-progress-fill" style="width: 100%"></div>
              </div>
            </div>
            <div class="badge tier-silver">
              <div class="badge-icon">‚≠ê</div>
              <div class="badge-name">Innovation Award</div>
              <div class="badge-category">Innovation</div>
              <div class="badge-progress">
                <div class="badge-progress-fill" style="width: 100%"></div>
              </div>
            </div>
            <div class="badge tier-bronze">
              <div class="badge-icon">üöÄ</div>
              <div class="badge-name">Fast Tracker</div>
              <div class="badge-category">Growth</div>
              <div class="badge-progress">
                <div class="badge-progress-fill" style="width: 100%"></div>
              </div>
            </div>
            <div class="badge tier-bronze">
              <div class="badge-icon">üë•</div>
              <div class="badge-name">Team Player</div>
              <div class="badge-category">Collaboration</div>
              <div class="badge-progress">
                <div class="badge-progress-fill" style="width: 75%"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- AI Chat Bubble -->
    <div class="ai-chat-container">
      <div class="ai-chat-window" id="aiChatWindow">
        <div class="ai-chat-header">
          <div class="ai-chat-avatar">AI</div>
          <div>
            <div class="ai-chat-title">Career Success AI</div>
            <div class="ai-chat-subtitle">Ask me about your career development</div>
          </div>
          <button class="ai-chat-close" id="aiChatClose">√ó</button>
        </div>
        <div class="ai-chat-messages" id="aiChatMessages">
          <div class="ai-message bot">
            Hello! I'm your AI Career Assistant. I can help you with:
            <div class="ai-suggestion-chips">
              <div class="ai-suggestion-chip" data-prompt="What skills should I focus on?">Skills to focus on</div>
              <div class="ai-suggestion-chip" data-prompt="How can I improve my leadership?">Leadership development</div>
              <div class="ai-suggestion-chip" data-prompt="What are my next career steps?">Career progression</div>
            </div>
          </div>
        </div>
        <div class="ai-chat-input">
          <input type="text" id="aiChatInput" placeholder="Ask about your career development...">
          <button id="aiChatSend">Send</button>
        </div>
      </div>
      <div class="ai-chat-bubble" id="aiChatBubble">
        <span>ü§ñ</span>
      </div>
    </div>

    <!-- Modal for Detailed Views -->
    <div class="modal" id="detailModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Details</h3>
          <button class="modal-close" id="modalClose">√ó</button>
        </div>
        <div class="modal-body" id="modalBody">
          <!-- Dynamic content will be loaded here -->
        </div>
      </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize animations
      initAnimations();
      
      // Initialize 9-Box Grid
      initNineBox();
      
      // Initialize Charts
      initProgressChart();
      initGapChart();
      
      // Set up event listeners
      setupEventListeners();
      
      // Initialize AI Chat
      initAIChat();
      
      // Initialize clickable sections
      initClickableSections();
    });

    function initAnimations() {
      // Animate header
      anime({
        targets: '.emp-header',
        opacity: [0, 1],
        translateY: [-20, 0],
        duration: 800,
        easing: 'easeOutCubic'
      });
      
      // Animate cards with stagger
      anime({
        targets: '.card',
        opacity: [0, 1],
        translateY: [20, 0],
        delay: anime.stagger(100),
        duration: 800,
        easing: 'easeOutCubic'
      });
      
      // Animate elements inside cards with delay
      setTimeout(() => {
        anime({
          targets: '.avatar, .stat-card, .idp-status, .ninebox-cell, .milestone, .idp-item, .mentor-box, .feedback-item, .career-step, .badge',
          opacity: [0, 1],
          translateY: [10, 0],
          delay: anime.stagger(50),
          duration: 600,
          easing: 'easeOutCubic'
        });
      }, 500);
    }

    function initNineBox() {
      const nineBoxGrid = document.getElementById('employeeNineBox');
      const performanceLabels = ['Low', 'Medium', 'High'];
      const potentialLabels = ['Low', 'Medium', 'High'];
      const performanceScores = ['3-4', '5-6', '7-8'];
      const potentialScores = ['3-4', '5-6', '7-8'];
      
      // Clear existing content
      nineBoxGrid.innerHTML = '';
      
      // Create 9-box grid
      for (let i = 2; i >= 0; i--) {
        for (let j = 0; j < 3; j++) {
          const cell = document.createElement('div');
          cell.className = 'ninebox-cell';
          cell.innerHTML = `
            <div class="ninebox-score">${performanceScores[j]}/${potentialScores[i]}</div>
            <div class="ninebox-label">${performanceLabels[j]} Perf</div>
            <div class="ninebox-label">${potentialLabels[i]} Pot</div>
          `;
          cell.dataset.perf = j;
          cell.dataset.pot = i;
          
          // Mark the active cell (High Perf / High Pot in this example)
          if (i === 2 && j === 2) {
            cell.classList.add('active');
          }
          
          // Add click event to change position
          cell.addEventListener('click', function() {
            document.querySelectorAll('.ninebox-cell').forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            updateNineBoxInterpretation(this.dataset.perf, this.dataset.pot);
            
            // Show detailed view
            showNineBoxDetails(this.dataset.perf, this.dataset.pot);
          });
          
          nineBoxGrid.appendChild(cell);
        }
      }
    }

    function updateNineBoxInterpretation(perf, pot) {
      const interpretations = [
        ["Needs performance improvement plan", "Monitor performance closely", "High potential but inconsistent"],
        ["Solid performer in current role", "Ready for expanded responsibilities", "Emerging talent with high potential"],
        ["Exceptional performer in current role", "Ready for promotion with development", "Future leader - ready for advancement"]
      ];
      
      const interpretationText = interpretations[pot][perf];
      document.getElementById('nineInterpret').textContent = interpretationText;
      
      // Animate the interpretation update
      anime({
        targets: '#nineInterpret',
        opacity: [0, 1],
        duration: 500,
        easing: 'easeOutCubic'
      });
    }

    function initProgressChart() {
      const progressCtx = document.getElementById('progressChart').getContext('2d');
      
      // Create gradient
      const gradient = progressCtx.createLinearGradient(0, 0, 0, 200);
      gradient.addColorStop(0, 'rgba(99, 102, 241, 0.6)');
      gradient.addColorStop(1, 'rgba(99, 102, 241, 0.1)');
      
      const progressChart = new Chart(progressCtx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
          datasets: [{
            label: 'IDP Progress',
            data: [20, 35, 45, 50, 65, 75],
            borderColor: '#6366f1',
            backgroundColor: gradient,
            tension: 0.4,
            fill: true,
            pointBackgroundColor: '#6366f1',
            pointBorderColor: '#0f172a',
            pointBorderWidth: 2,
            pointRadius: 5,
            pointHoverRadius: 7
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              backgroundColor: 'rgba(15, 23, 42, 0.9)',
              titleColor: '#f1f5f9',
              bodyColor: '#f1f5f9',
              borderColor: '#6366f1',
              borderWidth: 1
            }
          },
          scales: {
            x: {
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                color: '#94a3b8'
              }
            },
            y: {
              beginAtZero: true,
              max: 100,
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                color: '#94a3b8',
                callback: function(value) {
                  return value + '%';
                }
              }
            }
          }
        }
      });
    }

    function initGapChart() {
      const gapCtx = document.getElementById('gapChart').getContext('2d');
      
      const gapChart = new Chart(gapCtx, {
        type: 'bar',
        data: {
          labels: ['Strategic Thinking', 'Team Leadership', 'Technical Expertise', 'Stakeholder Management'],
          datasets: [
            {
              label: 'Current Level',
              data: [2, 3, 4, 2],
              backgroundColor: '#6366f1',
              borderRadius: 4,
              borderWidth: 0
            },
            {
              label: 'Required Level',
              data: [4, 4, 5, 3],
              backgroundColor: '#94a3b8',
              borderRadius: 4,
              borderWidth: 0
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
              labels: {
                color: '#f1f5f9',
                usePointStyle: true,
                padding: 15
              }
            },
            tooltip: {
              backgroundColor: 'rgba(15, 23, 42, 0.9)',
              titleColor: '#f1f5f9',
              bodyColor: '#f1f5f9',
              borderColor: '#6366f1',
              borderWidth: 1
            }
          },
          scales: {
            x: {
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                color: '#94a3b8'
              }
            },
            y: {
              beginAtZero: true,
              max: 5,
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                color: '#94a3b8',
                stepSize: 1
              }
            }
          }
        }
      });
    }

    function setupEventListeners() {
      // Export PDF functionality
      document.getElementById('exportPdf').addEventListener('click', function() {
        showToast('IDP document is being prepared for download...');
        // In a real implementation, this would generate and download a PDF
        setTimeout(() => {
          showToast('IDP document downloaded successfully!');
        }, 2000);
      });

      // Back button functionality
      document.getElementById('backBtn').addEventListener('click', function() {
        showToast('Returning to employee list...');
        // In a real implementation, this would navigate back
      });

      // AI Guidance button
      document.getElementById('aiGuidanceBtn').addEventListener('click', function() {
        showToast('Opening AI Career Guidance...');
        document.getElementById('aiChatWindow').classList.add('active');
      });

      // Connect with Mentor button
      document.getElementById('connectMentorBtn').addEventListener('click', function() {
        showToast('Connecting you with your mentor...');
        // In a real implementation, this would open a mentor connection interface
      });

      // Card hover animations
      document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', function() {
          anime({
            targets: this,
            scale: 1.02,
            duration: 300,
            easing: 'easeOutCubic'
          });
        });
        
        card.addEventListener('mouseleave', function() {
          anime({
            targets: this,
            scale: 1,
            duration: 300,
            easing: 'easeOutCubic'
          });
        });
      });
    }

    function initAIChat() {
      const chatBubble = document.getElementById('aiChatBubble');
      const chatWindow = document.getElementById('aiChatWindow');
      const chatClose = document.getElementById('aiChatClose');
      const chatSend = document.getElementById('aiChatSend');
      const chatInput = document.getElementById('aiChatInput');
      const chatMessages = document.getElementById('aiChatMessages');
      
      // Toggle chat window
      chatBubble.addEventListener('click', function() {
        chatWindow.classList.toggle('active');
      });
      
      // Close chat window
      chatClose.addEventListener('click', function() {
        chatWindow.classList.remove('active');
      });
      
      // Send message
      chatSend.addEventListener('click', sendMessage);
      chatInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
      
      // Suggestion chips
      document.querySelectorAll('.ai-suggestion-chip').forEach(chip => {
        chip.addEventListener('click', function() {
          chatInput.value = this.dataset.prompt;
          sendMessage();
        });
      });
      
      function sendMessage() {
        const message = chatInput.value.trim();
        if (!message) return;
        
        // Add user message
        addMessage(message, 'user');
        chatInput.value = '';
        
        // Simulate AI response
        setTimeout(() => {
          const response = generateAIResponse(message);
          addMessage(response, 'bot');
        }, 1000);
      }
      
      function addMessage(text, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `ai-message ${sender}`;
        messageDiv.textContent = text;
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        
        // Animate message
        anime({
          targets: messageDiv,
          opacity: [0, 1],
          translateY: [10, 0],
          duration: 300,
          easing: 'easeOutCubic'
        });
      }
      
      function generateAIResponse(message) {
        const responses = {
          'skills': "Based on your gap analysis, I recommend focusing on Strategic Thinking and Team Leadership. Consider the Strategic Leadership Program in your IDP.",
          'leadership': "Your 9-box position shows high potential for leadership. I suggest seeking mentorship from Robert Sharma and taking on the Cross-Functional Project Lead role.",
          'career': "Your career path looks promising! To reach Lead Engineer in 12-18 months, prioritize closing your competency gaps in Strategic Thinking and Stakeholder Management.",
          'default': "I can help you with career development advice based on your profile. Ask me about skills development, leadership growth, or career progression."
        };
        
        const lowerMessage = message.toLowerCase();
        
        if (lowerMessage.includes('skill')) {
          return responses.skills;
        } else if (lowerMessage.includes('leader')) {
          return responses.leadership;
        } else if (lowerMessage.includes('career') || lowerMessage.includes('next')) {
          return responses.career;
        } else {
          return responses.default;
        }
      }
    }

    function initClickableSections() {
      // 9-Box Grid click
      document.querySelectorAll('.ninebox-cell').forEach(cell => {
        cell.addEventListener('click', function() {
          showNineBoxDetails(this.dataset.perf, this.dataset.pot);
        });
      });
      
      // Career Path steps click
      document.querySelectorAll('.career-step').forEach(step => {
        step.addEventListener('click', function() {
          const stepNumber = this.querySelector('.step-number').textContent;
          const stepTitle = this.querySelector('h4').textContent;
          showCareerStepDetails(stepNumber, stepTitle);
        });
      });
      
      // Badges click
      document.querySelectorAll('.badge').forEach(badge => {
        badge.addEventListener('click', function() {
          const badgeName = this.querySelector('.badge-name').textContent;
          showBadgeDetails(badgeName);
        });
      });
      
      // IDP items click
      document.querySelectorAll('.idp-item').forEach(item => {
        item.addEventListener('click', function() {
          const itemTitle = this.querySelector('.idp-item-title').textContent;
          showIDPItemDetails(itemTitle);
        });
      });
      
      // Gap table rows click
      document.querySelectorAll('.gap-table tbody tr').forEach(row => {
        row.addEventListener('click', function() {
          const competency = this.cells[0].textContent;
          showGapDetails(competency);
        });
      });
      
      // Modal close
      document.getElementById('modalClose').addEventListener('click', function() {
        document.getElementById('detailModal').classList.remove('active');
      });
      
      // Close modal when clicking outside
      document.getElementById('detailModal').addEventListener('click', function(e) {
        if (e.target === this) {
          this.classList.remove('active');
        }
      });
    }

    function showNineBoxDetails(perf, pot) {
      const performanceLabels = ['Low', 'Medium', 'High'];
      const potentialLabels = ['Low', 'Medium', 'High'];
      
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      modalTitle.textContent = `${performanceLabels[perf]} Performance / ${potentialLabels[pot]} Potential Analysis`;
      
      const details = {
        '00': {
          description: 'Employees in this quadrant need focused performance improvement plans.',
          recommendations: [
            'Create a Performance Improvement Plan (PIP)',
            'Provide regular coaching and feedback',
            'Set clear, achievable short-term goals',
            'Consider role alignment assessment'
          ],
          development: 'Focus on foundational skills and consistent performance delivery'
        },
        '22': {
          description: 'High potential employees with strong performance ready for advancement.',
          recommendations: [
            'Provide stretch assignments and leadership opportunities',
            'Include in succession planning for key roles',
            'Offer advanced leadership development programs',
            'Assign executive mentorship'
          ],
          development: 'Focus on strategic thinking and organizational leadership'
        },
        '12': {
          description: 'Emerging talent with high potential and solid performance.',
          recommendations: [
            'Provide cross-functional project experience',
            'Offer leadership training programs',
            'Assign to high-visibility projects',
            'Provide mentorship from senior leaders'
          ],
          development: 'Focus on leadership skills and business acumen'
        }
      };
      
      const key = `${perf}${pot}`;
      const detail = details[key] || {
        description: 'This position indicates balanced development needs and opportunities.',
        recommendations: [
          'Continue current development path',
          'Monitor progress regularly',
          'Adjust development plan as needed'
        ],
        development: 'Balanced focus on both performance consistency and potential growth'
      };
      
      modalBody.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Description</h4>
          <p>${detail.description}</p>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Development Recommendations</h4>
          <ul style="padding-left: 1.5rem;">
            ${detail.recommendations.map(rec => `<li>${rec}</li>`).join('')}
          </ul>
        </div>
        
        <div>
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Development Focus</h4>
          <p>${detail.development}</p>
        </div>
      `;
      
      document.getElementById('detailModal').classList.add('active');
    }

    function showCareerStepDetails(stepNumber, stepTitle) {
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      modalTitle.textContent = `${stepTitle} - Career Path Details`;
      
      const stepDetails = {
        '1': {
          description: 'Junior Engineer role focused on foundational skill development.',
          competencies: ['Technical Proficiency', 'Problem Solving', 'Team Collaboration', 'Learning Agility'],
          timeline: '2 years',
          readiness: 'Completed',
          nextSteps: 'Progress to Senior Engineer role'
        },
        '2': {
          description: 'Senior Engineer role with increased responsibility and leadership.',
          competencies: ['Technical Leadership', 'Project Management', 'Mentoring', 'Stakeholder Communication'],
          timeline: '2-3 years',
          readiness: '65% complete',
          nextSteps: 'Develop strategic thinking and team leadership skills'
        },
        '3': {
          description: 'Lead Engineer role with technical leadership and strategic impact.',
          competencies: ['Strategic Thinking', 'Team Leadership', 'Technical Vision', 'Cross-functional Collaboration'],
          timeline: '12-18 months',
          readiness: 'Not yet started',
          nextSteps: 'Complete leadership development program and gain management experience'
        },
        '4': {
          description: 'Engineering Manager role with team leadership and organizational impact.',
          competencies: ['People Management', 'Budget Management', 'Strategic Planning', 'Organizational Leadership'],
          timeline: '2-3 years',
          readiness: 'Long-term goal',
          nextSteps: 'Develop management skills and business acumen'
        }
      };
      
      const detail = stepDetails[stepNumber] || {
        description: 'Career development step details.',
        competencies: ['Skill development', 'Experience building', 'Leadership growth'],
        timeline: 'To be determined',
        readiness: 'In planning',
        nextSteps: 'Continue current development path'
      };
      
      modalBody.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Role Description</h4>
          <p>${detail.description}</p>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Key Competencies</h4>
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
            ${detail.competencies.map(comp => `<span style="background: rgba(99, 102, 241, 0.2); color: var(--primary-light); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">${comp}</span>`).join('')}
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
          <div>
            <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Timeline</h4>
            <p>${detail.timeline}</p>
          </div>
          <div>
            <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Readiness</h4>
            <p>${detail.readiness}</p>
          </div>
        </div>
        
        <div>
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Next Steps</h4>
          <p>${detail.nextSteps}</p>
        </div>
      `;
      
      document.getElementById('detailModal').classList.add('active');
    }

    function showBadgeDetails(badgeName) {
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      modalTitle.textContent = `${badgeName} - Achievement Details`;
      
      const badgeDetails = {
        'Top Performer': {
          description: 'Awarded for consistently exceeding performance expectations.',
          criteria: [
            'Exceeded performance targets for 3 consecutive quarters',
            'Received outstanding feedback from managers and peers',
            'Demonstrated significant impact on key projects',
            'Showed consistent growth and development'
          ],
          earned: 'March 15, 2023',
          category: 'Performance'
        },
        'Innovation Award': {
          description: 'Recognized for innovative thinking and creative problem-solving.',
          criteria: [
            'Developed and implemented innovative solution',
            'Demonstrated creative approach to challenges',
            'Contributed to process improvements',
            'Showed willingness to experiment and learn'
          ],
          earned: 'January 30, 2023',
          category: 'Innovation'
        },
        'Fast Tracker': {
          description: 'Awarded for rapid skill development and career progression.',
          criteria: [
            'Rapid mastery of new skills and technologies',
            'Quick adaptation to increasing responsibilities',
            'Demonstrated leadership potential',
            'Consistent high performance in new challenges'
          ],
          earned: 'November 12, 2022',
          category: 'Growth'
        },
        'Team Player': {
          description: 'Recognized for exceptional collaboration and team support.',
          criteria: [
            'Consistently supported team members',
            'Effective collaboration across departments',
            'Positive influence on team morale',
            'Willingness to share knowledge and expertise'
          ],
          earned: 'In progress (75%)',
          category: 'Collaboration'
        }
      };
      
      const detail = badgeDetails[badgeName] || {
        description: 'Achievement recognition details.',
        criteria: ['Demonstrated excellence', 'Consistent performance', 'Positive impact'],
        earned: 'Date earned',
        category: 'Category'
      };
      
      modalBody.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Description</h4>
          <p>${detail.description}</p>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Earned</h4>
          <p>${detail.earned}</p>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Category</h4>
          <p>${detail.category}</p>
        </div>
        
        <div>
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Achievement Criteria</h4>
          <ul style="padding-left: 1.5rem;">
            ${detail.criteria.map(crit => `<li>${crit}</li>`).join('')}
          </ul>
        </div>
      `;
      
      document.getElementById('detailModal').classList.add('active');
    }

    function showIDPItemDetails(itemTitle) {
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      modalTitle.textContent = `${itemTitle} - Development Activity`;
      
      modalBody.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Activity Description</h4>
          <p>Detailed description of the development activity, including objectives, expected outcomes, and success metrics.</p>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
          <div>
            <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Duration</h4>
            <p>6 weeks</p>
          </div>
          <div>
            <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Priority</h4>
            <p>High</p>
          </div>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Resources</h4>
          <ul style="padding-left: 1.5rem;">
            <li>Online learning platform access</li>
            <li>Mentor guidance sessions</li>
            <li>Practice assignments and projects</li>
            <li>Assessment and feedback tools</li>
          </ul>
        </div>
        
        <div>
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Next Steps</h4>
          <p>Schedule kickoff meeting with your manager and mentor to align on expectations and timeline.</p>
        </div>
      `;
      
      document.getElementById('detailModal').classList.add('active');
    }

    function showGapDetails(competency) {
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      modalTitle.textContent = `${competency} - Gap Analysis`;
      
      modalBody.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Current vs Required Level</h4>
          <p>Detailed analysis of your current proficiency level compared to the required level for your target role.</p>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
          <div>
            <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Current Level</h4>
            <p>2 out of 5</p>
          </div>
          <div>
            <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Required Level</h4>
            <p>4 out of 5</p>
          </div>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Development Activities</h4>
          <ul style="padding-left: 1.5rem;">
            <li>Strategic Leadership Program (6 weeks)</li>
            <li>Case study analysis and presentation</li>
            <li>Mentorship sessions with senior leaders</li>
            <li>Strategic project assignment</li>
          </ul>
        </div>
        
        <div>
          <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Success Metrics</h4>
          <ul style="padding-left: 1.5rem;">
            <li>Improve strategic thinking assessment score by 40%</li>
            <li>Successfully lead one strategic initiative</li>
            <li>Receive positive feedback from leadership on strategic contributions</li>
          </ul>
        </div>
      `;
      
      document.getElementById('detailModal').classList.add('active');
    }

    // Toast notification function
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      
      anime({
        targets: '#toast',
        translateX: [100, 0],
        opacity: [0, 1],
        duration: 500,
        easing: 'easeOutCubic'
      });
      
      setTimeout(() => {
        anime({
          targets: '#toast',
          translateX: [0, 100],
          opacity: [1, 0],
          duration: 500,
          easing: 'easeInCubic',
          complete: function() {
            toast.classList.remove('show');
          }
        });
      }, 3000);
    }
  </script>
</body>
</html>